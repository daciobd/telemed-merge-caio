import { Button } from "@/src/components/ui/button"; import { AUCTION_URL, authToken } from "./shared"; import { Card, CardContent, CardHeader, CardTitle } from "@/src/components/ui/card";
export default function Result(){ const data = JSON.parse(localStorage.getItem('lastBid')||'null'); async function pay(){ const r=await fetch(`${AUCTION_URL}/payments/checkout`,{ method:'POST', headers:{'Content-Type':'application/json','Authorization':'Bearer '+authToken()}, body: JSON.stringify({ bidId: data.bidId })}); const j=await r.json(); if(j.url) location.href=j.url; } if(!data) return <div className='p-6'>Sem resultado.</div>; return <div className='p-6'><Card><CardHeader><CardTitle>Resultado</CardTitle></CardHeader><CardContent><pre className='text-xs bg-gray-50 p-2 rounded'>{JSON.stringify(data,null,2)}</pre>{(data.status==='accepted_immediate'||data.status==='accepted_scheduled') && <Button onClick={pay}>Ir para pagamento</Button>}</CardContent></Card></div>; }