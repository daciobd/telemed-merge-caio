datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Transcrição de uma consulta (áudio/texto)
model Transcript {
  id        String      @id @default(cuid())
  // adicione aqui campos que você já usa (ex.: physicianId, patientId, text, audioUrl)
  createdAt DateTime    @default(now())
  summaries AISummary[] // 1:N
}

// Resumos gerados pela IA (SOAP, CID10, etc.)
model AISummary {
  id           String     @id @default(cuid())
  transcriptId String
  transcript   Transcript @relation(fields: [transcriptId], references: [id], onDelete: Cascade)

  type         String?    // ex.: "soap" | "cid10"
  content      String?
  model        String?    // ex.: "gpt-4o-mini"
  tokens       Int?

  createdAt    DateTime   @default(now())

  @@index([transcriptId])
}
